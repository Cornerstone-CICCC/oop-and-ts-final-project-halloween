<div id="usernameModal" class="fixed overflow-auto z-1 left-0 top-0 w-full h-full bg-black bg-opacity-50" style="display: none;">
  <div class="bg-[#fefefe] p-4 rounded-lg my-[15%] mx-auto w-[80%] max-w-[500px]">
    <h2 class="text-2xl">Who are you?</h2>
    <div class="flex gap-4">
      <input id="usernameInput" class="p-4 ps-10 rounded-lg text-black w-full lg:px-4 border border-black focus:outline-none" type="text" placeholder="input your name" />
      <button id="saveUserName">OK</button>
    </div>
  </div>
</div>

<script>
  const demo = true;
  if (demo) localStorage.removeItem("username");
  if (!localStorage.getItem("username")) {
    const modal = document.getElementById("usernameModal");
    if (modal) {
      modal.style.display = "block";
    }
  }

  document.addEventListener("DOMContentLoaded", () => {
    const button = document.getElementById("saveUserName");
    const input = document.getElementById("usernameInput");

    function saveUserName() {
      //@ts-ignore
      localStorage.setItem("username", input?.value);
      const modal = document.getElementById("usernameModal");
      if (modal) {
        modal.style.display = "none";
      }
    }

    button?.addEventListener("click", saveUserName);

    input?.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        saveUserName();
      }
    });
  });
</script>

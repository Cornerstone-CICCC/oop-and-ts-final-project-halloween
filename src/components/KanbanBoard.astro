---
import { tasks, addTask } from "../lib/taskStore";
---

<div class="flex gap-4">
  <div class="mb-4">
    <form id="add-task-form">
      <button type="submit">Add Task</button>
    </form>
  </div>

  <div id="task-list">
    <!-- タスクリストがここに表示されます -->
  </div>
</div>

<script>
  import { tasks, addTask } from "../lib/taskStore";

  const form = document.getElementById("add-task-form");
  if (!form) throw new Error("add-task-form not found");
  const taskList = document.getElementById("task-list");
  if (!taskList) throw new Error("task-list not found");

  form.addEventListener("submit", (e) => {
    e.preventDefault();
    const title = "Title";
    const description = "Description";

    addTask(title, description);
  });

  tasks.subscribe(($tasks) => {
    taskList.innerHTML = $tasks
      .map(
        (task) => `
      <div class="border border-gray-300 rounded-md p-4">
        <h3 class="text-lg font-bold">${task.title}</h3>
        <p class="text-gray-500">${task.description}</p>
        <p class="text-gray-500">Status: ${task.status}</p>
      </div>
    `
      )
      .join("");
  });
</script>
